<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid å›¾è¡¨æµ‹è¯•</title>
    <script src="/static/vendor/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true, 
            theme: 'default',
            flowchart: { curve: 'basis' }
        });
    </script>
    <style>
        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #3498db;
            margin-top: 30px;
        }
        .mermaid {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 20px;
            margin: 20px 0;
        }
        .success {
            color: #27ae60;
            font-weight: bold;
        }
        .info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Mermaid å›¾è¡¨åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="info">
        <p><strong>æµ‹è¯•è¯´æ˜ï¼š</strong></p>
        <p>æœ¬é¡µé¢ç”¨äºéªŒè¯ Mermaid.js æ˜¯å¦æ­£ç¡®åŠ è½½å¹¶èƒ½æ­£å¸¸æ¸²æŸ“å„ç§ç±»å‹çš„å›¾è¡¨ã€‚</p>
        <p>å¦‚æœä¸‹é¢çš„å›¾è¡¨æ­£å¸¸æ˜¾ç¤ºï¼Œè¯´æ˜ Mermaid åŠŸèƒ½å·²æˆåŠŸé›†æˆï¼</p>
    </div>

    <div class="test-section">
        <h2>1. æµç¨‹å›¾ (Flowchart)</h2>
        <p>å±•ç¤ºä¸šåŠ¡æµç¨‹ã€å†³ç­–æ ‘ç­‰ã€‚</p>
        <div class="mermaid">
flowchart TD
    A[å¼€å§‹éœ€æ±‚åˆ†æ] --> B{éœ€æ±‚æ˜¯å¦æ˜ç¡®?}
    B -->|æ˜¯| C[åˆ¶å®šå®æ–½æ–¹æ¡ˆ]
    B -->|å¦| D[ç»§ç»­è°ƒç ”]
    D --> B
    C --> E[æŠ€æœ¯è¯„å®¡]
    E --> F{è¯„å®¡é€šè¿‡?}
    F -->|æ˜¯| G[å¼€å§‹å¼€å‘]
    F -->|å¦| C
    G --> H[æµ‹è¯•éªŒè¯]
    H --> I{æµ‹è¯•é€šè¿‡?}
    I -->|æ˜¯| J[éƒ¨ç½²ä¸Šçº¿]
    I -->|å¦| G
    J --> K[ç»“æŸ]
        </div>
    </div>

    <div class="test-section">
        <h2>2. æ—¶åºå›¾ (Sequence Diagram)</h2>
        <p>å±•ç¤ºç³»ç»Ÿäº¤äº’ã€APIè°ƒç”¨æµç¨‹ã€‚</p>
        <div class="mermaid">
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Frontend as å‰ç«¯
    participant Backend as åç«¯
    participant Database as æ•°æ®åº“
    
    User->>Frontend: å‘èµ·è¯·æ±‚
    Frontend->>Backend: API è°ƒç”¨
    Backend->>Database: æŸ¥è¯¢æ•°æ®
    Database-->>Backend: è¿”å›ç»“æœ
    Backend-->>Frontend: JSON å“åº”
    Frontend-->>User: æ¸²æŸ“é¡µé¢
        </div>
    </div>

    <div class="test-section">
        <h2>3. ç”˜ç‰¹å›¾ (Gantt Chart)</h2>
        <p>é¡¹ç›®æ—¶é—´è§„åˆ’ã€é‡Œç¨‹ç¢‘ç®¡ç†ã€‚</p>
        <div class="mermaid">
gantt
    title AI é¡¹ç›®å¼€å‘è®¡åˆ’
    dateFormat YYYY-MM-DD
    section éœ€æ±‚åˆ†æ
    éœ€æ±‚è°ƒç ” :a1, 2026-01-01, 7d
    éœ€æ±‚æ–‡æ¡£ :a2, after a1, 5d
    section è®¾è®¡å¼€å‘
    æ¶æ„è®¾è®¡ :b1, after a2, 10d
    å‰ç«¯å¼€å‘ :b2, after b1, 20d
    åç«¯å¼€å‘ :b3, after b1, 25d
    section æµ‹è¯•ä¸Šçº¿
    ç³»ç»Ÿæµ‹è¯• :c1, after b2, 10d
    éƒ¨ç½²ä¸Šçº¿ :c2, after c1, 3d
        </div>
    </div>

    <div class="test-section">
        <h2>4. ç±»å›¾ (Class Diagram)</h2>
        <p>ç³»ç»Ÿæ¶æ„ã€æ¨¡å—å…³ç³»ã€‚</p>
        <div class="mermaid">
classDiagram
    class AIAgent {
        +String name
        +String role
        +execute()
        +think()
    }
    class Leader {
        +decompose()
        +synthesize()
    }
    class Planner {
        +generatePlan()
        +search()
    }
    class Auditor {
        +review()
        +critique()
    }
    
    AIAgent <|-- Leader
    AIAgent <|-- Planner
    AIAgent <|-- Auditor
    Leader "1" --> "*" Planner : manage
    Leader "1" --> "*" Auditor : manage
        </div>
    </div>

    <div class="test-section">
        <h2>5. çŠ¶æ€å›¾ (State Diagram)</h2>
        <p>çŠ¶æ€æœºã€ç”Ÿå‘½å‘¨æœŸã€‚</p>
        <div class="mermaid">
stateDiagram-v2
    [*] --> Pending
    Pending --> Discussing : start
    Discussing --> Reviewing : propose
    Reviewing --> Discussing : issue_found
    Reviewing --> Summarizing : approved
    Summarizing --> Completed : generate_report
    Completed --> [*]
        </div>
    </div>

    <div class="test-section">
        <h2>6. é¥¼å›¾ (Pie Chart)</h2>
        <p>ç®€å•çš„å æ¯”å±•ç¤ºã€‚</p>
        <div class="mermaid">
pie title èµ„æºåˆ†é…å æ¯”
    "ç ”å‘" : 45
    "æµ‹è¯•" : 20
    "è¿ç»´" : 15
    "äº§å“" : 12
    "å…¶ä»–" : 8
        </div>
    </div>

    <div class="success" style="text-align: center; padding: 30px; font-size: 1.2em;">
        âœ… å¦‚æœä¸Šè¿°æ‰€æœ‰å›¾è¡¨éƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œè¯´æ˜ Mermaid åŠŸèƒ½å·²æˆåŠŸé›†æˆï¼
    </div>

    <script>
        // æ£€æµ‹ Mermaid æ˜¯å¦åŠ è½½æˆåŠŸ
        window.addEventListener('load', function() {
            if (typeof mermaid !== 'undefined') {
                console.log('âœ… Mermaid.js åŠ è½½æˆåŠŸï¼');
                console.log('Mermaid ç‰ˆæœ¬:', mermaid.version || 'unknown');
            } else {
                console.error('âŒ Mermaid.js åŠ è½½å¤±è´¥ï¼');
                document.body.innerHTML = '<div style="color: red; text-align: center; padding: 50px;"><h1>âŒ Mermaid.js åŠ è½½å¤±è´¥</h1><p>è¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®</p></div>';
            }
        });
    </script>
</body>
</html>
